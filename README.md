Привет.
Начну с того, что простой обыватель сюда просто так не зайдет, 
видимо кому-то действительно понадобились знания, как получать данные с АТС (по протоколу SMDR). 
Легкое представления о настройке станций у вас должны быть, иначе будет больно.
Сервис неидеальный. Само понимание работы каждой из станций происходит долго.
Навсякий случай в папки (settings_ATC) закинуты доки, в которых расписано подключение протокола SMDR на каждой из станций.

Поэтому проще разобраться и поднять Asterisk, а в нем обрабатывать уже обаботанные звонки в файле. -_-

В проекте всего 4 папки сервиса PBX:
PBX_Avaya_g650 - скрипт, который принимает звонки с avaya. Станция avaya - клиент, скрипт - сервер.
PBX_Nec_2000_sv8300 - скрипт, который принимает звонки с NEAX NEC 2000 и NEC SV 8300. Станция NEC- сервер, скрипт - клиент.
PBX_SQLite - находиться база данных.
PBX_Web - фронт и бэк сервиса.

Этапы сервиса: 
1.АТС отправляет строчку с данными.
2.Скрипты обрабатывают эту строчку, добавляют в базу.
3.Фронтенд и бэк выводят все на экран.


Данный сервис подойдет не для всех ... Почему ? 
Предполагается, что в организации внутренние номера имею всего 4 цифры.
Обработка внешних номеров - только российские операторы.

Если эти условия у вас не совпадают, то сервис работать не будет!

ЧТО НАДО ДОРАБОТАТЬ!
_____________________________________________________________________________________

#PBX_SQLite
Неудобное создание базы данных: 1. импорт больших данных происходит через приложение SQLite.
(первоначально, чтобы база имела таблицу сотрудников и тарифы, нужно импортировать файл csv в файл .db). 
Самостоятельно докинуть базу данных в проект на сервере, в папку PBX_SQLite.
Неправильные столбцы в базе данных(hash и password, на работу не влияет, для глаз. 
Hash по-умолчанию становится null, а в password записывается hash)

#PBX_Nec_2000_sv8300
1.Нужно пройти по работе устройства и правильно настроить ожидание ответа от станции. 
(или сделать отдельный крон контейнер, запус/откл. контейнеров)
(станции старенькие, когда нет инфомрации в оперативной памяти они отправляют 
"" пусто, станции начибют тупить, или писать обработку самостоятельно на тайминг)
2.Нет обработки городских номеров по кодам.

#PBX_Web
1.Есть ошибки на несовместимость библиотек.
2.Неправильно работают запросы на проверку сегодняшнего дня. 
3.Нет аддаптивного выбора своего порта для проекта.

_____________________________________________________________________________________

ПОЯСНЕНИЯ К ПОДСЕРВИСАМ ЛЕЖАТ В ПАПКАХ

_____________________________________________________________________________________

ВКЛЮЧЕНИЕ РАБОТЫ СЕРВИСА И ЕГО НАСТРОЙКА

Сервис запускается с пощью докер контейнеров.
docker-compose.yml - файл, в котором настраивается работа всех контейнеров.

В организации несколько филиалов, в каждом из которых стоит одна из станций.
Поэтому количество контейнеров зависит от количества станций. 
Несколько станций NEC, одна Avaya. 
Два контенера взаимодействую между собой для веба: frontend и backend.


На машину устанавливаем docker-compose. 
Настраиваем файл docker-compose.yml:
В контейнерах Filial меняются ip АТС станций.
В контейнере avaya меняем ip сервера, с которого и запускается этот сервис.

Контейнеры frontend и backend не изменяются. 
Стандартный логин и пароль admin.
Порты для работы с веб 3000 и 3001 соответственно (их не меняем).
Для frontend в папке .\PBX_service\PBX_Web\Frontend\.env меняем ip у переменной REACT_APP_IP_BACKEND_SERVER на ip сервера.
Для backend в папке .\PBX_service\PBX_Web\backend\.env добавляем два токена JWT_SECRET и SESSION_SECRET со своими значениями.



Протестирован на АТС: 
NEAX NEC 2000, NEC sv8300, AVAYA g650

